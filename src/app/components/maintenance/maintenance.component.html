<app-layout>
    <mat-sidenav-container>
        <mat-sidenav #sidenav role="navigation">
            <app-exercice (sidenavClose)="sidenav.close()"></app-exercice>
        </mat-sidenav>
        <mat-sidenav-content>
            <app-header (sidenavToggle)="sidenav.toggle()"></app-header>
            <main>


                <div class="container">

                    <div class="entete">
                        <mat-form-field>
                            <input (keyup)="applyFiltrer($event)" matInput placeholder="Filtrer">
                        </mat-form-field>
                        <button id="firstButton" @fade mat-raised-button type="submit" color="warn" *ngIf="this.selection.selected.length<=0" (click)="openDialogue()">Ajouter</button>
                        <button id="firstButton" @fade mat-raised-button type="submit" color="accent" *ngIf="this.selection.selected.length>0" (click)="deleteMaintenance()">Supprimer</button>
                    </div>




                    <!--<div class="button-div">
     <button id="firstButton" @fade mat-stroked-button type="submit" color="primary" *ngIf="this.selection.selected.length<=0" (click)="openDialogue()">Ajouter</button> 
    <button id="firstButton" @fade mat-stroked-button type="submit" color="warn" *ngIf="this.selection.selected.length>0" (click)="deleteMaintenance()">Supprimer</button>
    <button @fade mat-stroked-button color="accent">Imprimer</button>

</div>-->
                    <mat-spinner mode="indeterminate" *ngIf="IsWait" color="primary"></mat-spinner>

                    <div class="mat-elevation-z8" *ngIf="!IsWait">
                        <table @fade mat-table id="maintenanceToPrint" [dataSource]="dataSource" class="mat-elevation-z8">

                            <!-- Checkbox Column -->
                            <ng-container matColumnDef="select">
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? toggleAllRows() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                                    </mat-checkbox>
                                </td>
                            </ng-container>

                            <!-- Id Column 
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> No. </th>
                <td mat-cell *matCellDef="let element"> {{dataSource.filteredData.indexOf(element)+1}} </td>
            </ng-container>-->



                            <!-- Chauffeur maintenance Column -->

                            <ng-container matColumnDef="chauffeur">
                                <th mat-header-cell *matHeaderCellDef> Chauffeur </th>
                                <td mat-cell *matCellDef="let element"> {{element.chauffeur[0].nom }} {{element.chauffeur[0].prenom }} </td>
                            </ng-container>

                            <!-- Date maintenance Column -->

                            <ng-container matColumnDef="date_maintenance">
                                <th mat-header-cell *matHeaderCellDef> Date </th>
                                <td mat-cell *matCellDef="let element"> {{element.date_maintenance | date:'dd MMMM yyyy' }} </td>
                            </ng-container>

                            <!-- Motif Column -->
                            <ng-container matColumnDef="motif">
                                <th mat-header-cell *matHeaderCellDef> Motif </th>
                                <td mat-cell *matCellDef="let element"> {{element.motif}} </td>
                            </ng-container>


                            <!-- Montant Column -->
                            <ng-container matColumnDef="montant">
                                <th mat-header-cell *matHeaderCellDef> Montant </th>
                                <td mat-cell *matCellDef="let element"> {{element.montant | currency }} </td>
                            </ng-container>

                            <!-- Actions Column 
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="warn">
                        <mat-icon>edit</mat-icon>
                    </button>

                    <button mat-icon-button color="warn">
                        <mat-icon>delete</mat-icon>
                    </button>
                </td>
            </ng-container>-->

                            <!-- References Column -->
                            <!-- <ng-container matColumnDef="reference">
            <th mat-header-cell *matHeaderCellDef> References </th>
            <td mat-cell *matCellDef="let element"> pas de references </td>
        </ng-container> -->


                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row (click)="clickedRow(row)" [class.demo-row-is-clicked]="clickedRows.has(row)" *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
                            </tr>

                        </table>
                        <mat-paginator #paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[2,5, 10, 25, 100]" showFirstLastButtons aria-label="Select page of periodic elements">
                        </mat-paginator>

                        <!-- <div class="button">
        <button @fade mat-stroked-button color="warn">precedent</button>
        <button @fade mat-stroked-button color="primary">suivant</button>
    </div> -->
                    </div>
                </div>
            </main>
        </mat-sidenav-content>
    </mat-sidenav-container>
</app-layout>